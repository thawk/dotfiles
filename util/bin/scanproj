#!/usr/bin/env bash
# Time: 2020-04-17 08:45:33

if [[ -f .clang ]]
then
    # remove all include rules generated by myself (-I./*)
    sed -i -e '/^ *-I\.\//d' .clang
else
    > .clang echo "-std=c++11
-std=gnu++11"
fi

find . -type d -name include |
    grep -v "/unittest/\|/test/\|/examples\?/" |
    grep -v "/boost_[0-9]\+_[0-9_]\+/" |
    sed -n -e '/^[^ ]/{s#^#-I#;p;}' \
    >> .clang
